
<?php $__env->startSection('title', trans('ticket_index.page_title')); ?>

<?php $__env->startSection('styles'); ?>
        
<?php $__env->stopSection(); ?>

<?php $__env->startSection('content'); ?>
    
    <div class="container">
        <div class="block-header">
            <h2><?php echo trans('ticket_index.page_title'); ?></h2>
        </div>
        
        <div class="card">
            <div class="card-body card-padding">
                <table id="data-table" class="datatable table table-striped table-vmiddle">
                    <thead>
                        <tr>
                            <th><?php echo trans('ticket_index.ticket_number'); ?></th>
                            <th><?php echo trans('ticket_index.subject'); ?></th>
                            <th><?php echo trans('ticket_index.status'); ?></th>
                            <th><?php echo trans('ticket_index.priority'); ?></th>
                            <th><?php echo trans('ticket_index.content'); ?></th>
                            <th data-type="timestamp"><?php echo trans('ticket_index.sent_date'); ?></th>
                            <th><?php echo trans('ticket_index.assigned_staff'); ?></th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach($tickets as $ticket): ?>
                            <tr>
                                <td><a href="<?php echo URL::to('ticket/view/' . $ticket->id); ?>"><?php echo $ticket->case_number; ?></a></td>
                                <td><?php echo $ticket->name; ?></td>
                                <td><?php echo $statuses->{$ticket->status}; ?></td>
                                <td><?php echo $priorities->{$ticket->priority}; ?></td>
                                <td><?php echo $ticket->description; ?></td>
                                <td><?php echo SugarUtil::formatDate($ticket->date_entered); ?></td>
                                <td><?php echo $ticket->assigned_user_name; ?></td>
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>    
            </div>
        </div>
    </div>

<?php $__env->stopSection(); ?>

<?php $__env->startSection('scripts'); ?>

    <script src="<?php echo URL::asset('public/vendors/datatables/media/js/jquery.dataTables.min.js'); ?>"></script>
    <script src="<?php echo URL::asset('public/vendors/datatables/media/js/dataTables.bootstrap.min.js'); ?>"></script>
    <script src="<?php echo URL::asset('public/js/ticket_index.js'); ?>"></script>

    <?php if(Session::has('success_message')): ?>
        <script type="text/javascript">
            Notification.notify('<?php echo Session::get('success_message'); ?>', 'success');
        </script>
    <?php endif; ?>
    
<?php $__env->stopSection(); ?>
<?php echo $__env->make('layouts.master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>